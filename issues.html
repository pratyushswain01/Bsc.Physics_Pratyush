<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSc. Physics - Issue Submission</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <style>
        /* --- THEME DEFINITIONS --- */
        :root {
            --base-bg: #f0f2f5; --surface-bg: #ffffff; --surface-border: #e2e8f0; --text-primary: #020617; --text-secondary: #475569;
            --accent: #0ea5e9; --accent-glow: rgba(14, 165, 233, 0.4); --danger: #ef4444;
            --green: #22c55e; --purple: #8b5cf6; --orange: #f97316; --blue: #3b82f6;
            --modal-overlay-bg: rgba(10, 10, 15, 0.5); --modal-surface-bg: rgba(255, 255, 255, 0.8);
            --social-bg: linear-gradient(45deg, #4f46e5, #0ea5e9);
        }

        body.dark-mode {
            --base-bg: #05080F; --surface-bg: #101522; --surface-border: #23293A; --text-primary: #f0f2f5; --text-secondary: #a1a7b8;
            --accent: #0ea5e9; --danger: #f87171;
            --green: #4ade80; --purple: #a78bfa; --orange: #fb923c; --blue: #60a5fa;
            --modal-overlay-bg: rgba(0, 0, 0, 0.7); --modal-surface-bg: rgba(30, 35, 50, 0.8);
            --social-bg: linear-gradient(45deg, #6366f1, #0ea5e9);
        }

        /* --- GLOBAL & LAYOUT --- */
        *, *::before, *::after { box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: var(--base-bg); color: var(--text-primary); margin: 0; transition: background-color 0.4s ease; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; padding: 2rem 0; }
        @keyframes fadeInAndUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* --- HEADER & CONTROLS --- */
        .app-header { padding-bottom: 2rem; display: flex; justify-content: space-between; align-items: center; }
        .logo h1 { font-size: 1.8rem; font-weight: 700; color: var(--text-primary); margin: 0; } .logo h1 span { color: var(--accent); }
        .header-controls { display: flex; align-items: center; gap: 1.5rem; }
        .datetime { text-align: right; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.4; }
        .collab-info { border-left: 2px solid var(--surface-border); padding-left: 1rem; font-size: 0.9rem; font-weight: 500; color: var(--text-secondary); }
        .theme-switcher { position: relative; } #theme-toggle { display: none; }
        .slider { cursor: pointer; width: 50px; height: 26px; background-color: var(--surface-bg); border: 1px solid var(--surface-border); border-radius: 26px; display: block; position: relative; transition: all 0.3s ease; }
        .slider::before { content: ''; position: absolute; height: 20px; width: 20px; left: 2px; top: 2px; background-color: var(--text-secondary); border-radius: 50%; transition: all 0.3s ease; }
        #theme-toggle:checked + .slider { background-color: var(--accent); } #theme-toggle:checked + .slider::before { transform: translateX(24px); background-color: white; }

        /* --- PAGE INTRO & EMPTY STATE --- */
        .page-content { text-align: center; padding: 4rem 1rem; background-color: var(--surface-bg); border-radius: 1rem; border: 1px solid var(--surface-border); animation: fadeInAndUp 0.8s ease 0.2s forwards; opacity: 0; transform: translateY(30px); }
        .page-content i { color: var(--accent); margin-bottom: 1.5rem; }
        .page-content h1 { font-size: 2.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.5rem; }
        .page-content h1 span { color: var(--accent); }
        .page-content p { font-size: 1.1rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto 1.5rem auto; }
        .btn-primary { border: none; padding: 0.8rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; background: var(--social-bg); color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }

        /* --- FLOATING ACTION BUTTON (FAB) --- */
        .fab { position: fixed; bottom: 2rem; right: 2rem; width: 56px; height: 56px; background: var(--social-bg); color: white; border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(0,0,0,0.2); cursor: pointer; transition: all 0.3s ease; z-index: 1000; }
        .fab:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 12px 25px rgba(0,0,0,0.3); }

        /* --- MODAL STYLES --- */
        .modal-overlay { position: fixed; inset: 0; background-color: var(--modal-overlay-bg); z-index: 2000; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-content { background-color: var(--modal-surface-bg); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 1px solid var(--surface-border); border-radius: 1rem; width: 90%; max-width: 500px; box-shadow: 0 15px 40px rgba(0,0,0,0.2); transform: scale(0.95); transition: all 0.3s ease; }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .modal-header { padding: 1.5rem; border-bottom: 1px solid var(--surface-border); }
        .modal-title { font-size: 1.25rem; font-weight: 600; margin: 0; }
        #issue-form { padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem; }
        #issue-form label { font-weight: 500; font-size: 0.9rem; color: var(--text-secondary); }
        #issue-form input, #issue-form select, #issue-form textarea { width: 100%; background-color: var(--surface-bg); border: 1px solid var(--surface-border); border-radius: 0.5rem; padding: 0.75rem; color: var(--text-primary); font-family: 'Inter', sans-serif; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
        #issue-form input:focus, #issue-form select:focus, #issue-form textarea:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-glow); }
        .form-actions { display: flex; justify-content: flex-end; gap: 0.75rem; padding: 0 1.5rem 1.5rem; }
        .form-btn { border: none; padding: 0.6rem 1.2rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; justify-content: center; }
        .btn-submit { background-color: var(--green); color: white; } .btn-submit:hover:not(:disabled) { background-color: #1ca352; }
        .btn-submit:disabled { background-color: #9ca3af; cursor: not-allowed; opacity: 0.6; }
        .btn-cancel { background-color: var(--surface-bg); color: var(--text-primary); border: 1px solid var(--surface-border); } .btn-cancel:hover { background-color: var(--base-bg); }

        /* --- NOTIFICATION TOAST --- */
        .toast { position: fixed; top: 2rem; right: 2rem; background-color: var(--surface-bg); color: var(--text-primary); border: 1px solid var(--surface-border); border-left-width: 5px; border-radius: 0.5rem; padding: 1rem 1.5rem; display: flex; align-items: center; gap: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,0.1); z-index: 3000; opacity: 0; transform: translateX(100%); visibility: hidden; transition: all 0.4s cubic-bezier(0.215, 0.610, 0.355, 1); }
        .toast.visible { opacity: 1; transform: translateX(0); visibility: visible; }
        .toast.success { border-left-color: var(--green); } .toast.success i { color: var(--green); }
        .toast.error { border-left-color: var(--danger); } .toast.error i { color: var(--danger); }

        /* --- FOOTER --- */
        .app-footer { background-color: var(--surface-bg); padding: 4rem 0 0 0; margin-top: auto; border-top: 1px solid var(--surface-border); }
        .footer-content { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 3rem; width: 90%; max-width: 1200px; margin: 0 auto; padding-bottom: 3rem; }
        .footer-column h3 { font-size: 1.1rem; font-weight: 600; color: var(--text-primary); margin: 0 0 1.25rem 0; }
        .footer-column p, .footer-column a { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.7; text-decoration: none; }
        .footer-column ul { list-style: none; padding: 0; margin: 0; } .footer-column li { margin-bottom: 0.75rem; }
        .footer-column a:hover { color: var(--accent); text-decoration: underline; }
        .footer-logo { font-size: 1.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 1.25rem; }
        .footer-logo span { color: var(--accent); }
        .social-links { display: flex; gap: 1rem; }
        .social-links a { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: var(--social-bg); border-radius: 50%; color: #ffffff !important; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .social-links a:hover { transform: translateY(-3px); box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-decoration: none; }
        .footer-bottom { border-top: 1px solid var(--surface-border); text-align: center; padding: 1.5rem 0; }
        .footer-bottom p { margin: 0; font-size: 0.85rem; color: var(--text-secondary); }

        @media (max-width: 768px) {
            .container { width: 95%; padding: 1rem 0; } .app-header { flex-direction: column; align-items: flex-start; gap: 1.5rem; padding-bottom: 1.5rem; }
            .header-controls { width: 100%; justify-content: space-between; } .datetime { text-align: left; }
            .page-content h1 { font-size: 2rem; } .page-content p { font-size: 1rem; }
            .footer-content { grid-template-columns: 1fr; gap: 2.5rem; } .app-footer { padding-top: 3rem; }
            .fab { bottom: 1.5rem; right: 1.5rem; }
        }
    </style>
</head>
<body class="dark-mode">

    <div class="container">
        <header class="app-header">
            <div class="logo"><h1>BSc. <span>Physics</span></h1><div class="collab-info">SDVM, Neelakanthanagar</div></div>
            <div class="header-controls">
                <div id="datetime" class="datetime"></div>
                <div class="theme-switcher"><input type="checkbox" id="theme-toggle" checked><label for="theme-toggle" class="slider"></label></div>
            </div>
        </header>

        <main>
            <section class="page-content">
                <i data-feather="mail" style="width: 48px; height: 48px; margin-inline: auto;"></i>
                <h1>Issue <span>Submission Center</span></h1>
                <p>Found a bug, have a suggestion, or want to ask a question? Use the button below to open the submission form and send your feedback directly to us.</p>
                <button id="main-create-issue-btn" class="btn-primary">
                    <i data-feather="plus-circle" style="width: 16px; height: 16px; margin-right: 8px;"></i>
                    Create New Issue Report
                </button>
            </section>
        </main>
    </div>

    <footer class="app-footer">
        <div class="footer-content">
            <div class="footer-column"><div class="footer-logo">BSc. <span>Physics</span></div><p>Your central hub for BSc. Physics resources from Saraswati Degree Vidya Mandir, Neelakanthanagar, Bam-2 . We provide structured notes and guides to help you succeed in your academic journey.</p></div>
            <div class="footer-column"><h3>Quick Links</h3><ul><li><a href="#">About Us</a></li><li><a href="#">Semester Notes</a></li><li><a href="#">Contact Support</a></li></ul></div>
            <div class="footer-column"><h3>Connect With Us</h3><div class="social-links"><a href="#" aria-label="Facebook"><i data-feather="facebook"></i></a><a href="#" aria-label="Twitter"><i data-feather="twitter"></i></a><a href="#" aria-label="Instagram"><i data-feather="instagram"></i></a></div></div>
        </div>
        <div class="footer-bottom"><p>Copyright &copy; 2025 Pratyush Swain. All Rights Reserved. This platform is for educational purposes only.</p></div>
    </footer>

    <button id="fab-create-issue" class="fab" aria-label="Create new issue">
        <i data-feather="plus"></i>
    </button>

    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create a New Issue Report</h2>
            </div>
            <form id="issue-form">
                <div>
                    <label for="issue-title">Title</label>
                    <input type="text" id="issue-title" name="issue-title" required placeholder="A brief, descriptive title">
                </div>
                <div>
                    <label for="user-email">Your Email Address</label>
                    <input type="email" id="user-email" name="user-email" required placeholder="So the admin can reply to you">
                </div>
                 <div>
                    <label for="issue-label">Label</label>
                    <select id="issue-label" name="issue-label">
                        <option value="Bug">Bug</option>
                        <option value="Enhancement">Enhancement</option>
                        <option value="Urgent">Urgent</option>
                        <option value="Question">Question</option>
                    </select>
                </div>
                <div>
                    <label for="issue-comment">Comment</label>
                    <textarea id="issue-comment" name="issue-comment" rows="4" placeholder="Provide more details..."></textarea>
                </div>
            </form>
            <div class="form-actions">
                <button type="button" id="cancel-issue-btn" class="form-btn btn-cancel">Cancel</button>
                <button type="submit" form="issue-form" id="submit-issue-btn" class="form-btn btn-submit">
                    <span class="submit-text">Send Report</span>
                    <span class="spinner" style="display: none; width: 20px; height: 20px; border: 2px solid #fff; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></span>
                </button>
            </div>
        </div>
    </div>

    <div id="notification-toast" class="toast">
        <i id="toast-icon" data-feather="check-circle"></i>
        <span id="toast-message"></span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            feather.replace({ 'stroke-width': 1.5 });

            // --- INITIALIZE EMAILJS WITH YOUR KEYS ---
            (function(){
                emailjs.init("oNmOic7bTkN3qWU1g"); 
            })();

            // --- Element Selectors ---
            const themeToggle = document.getElementById('theme-toggle');
            const datetimeElement = document.getElementById('datetime');
            const fab = document.getElementById('fab-create-issue');
            const mainCreateBtn = document.getElementById('main-create-issue-btn');
            const modalOverlay = document.getElementById('modal-overlay');
            const cancelIssueBtn = document.getElementById('cancel-issue-btn');
            const issueForm = document.getElementById('issue-form');
            const submitBtn = document.getElementById('submit-issue-btn');
            const notificationToast = document.getElementById('notification-toast');
            const toastMessage = document.getElementById('toast-message');
            const toastIcon = document.getElementById('toast-icon');

            // --- Theme & Date/Time ---
            const applyTheme = (theme) => {
                if (theme === 'dark') { document.body.classList.add('dark-mode'); if(themeToggle) themeToggle.checked = true; } 
                else { document.body.classList.remove('dark-mode'); if(themeToggle) themeToggle.checked = false; }
            };
            const savedTheme = localStorage.getItem('theme') || 'dark';
            applyTheme(savedTheme);
            if(themeToggle){ themeToggle.addEventListener('change', () => { const newTheme = themeToggle.checked ? 'dark' : 'light'; localStorage.setItem('theme', newTheme); applyTheme(newTheme); }); }
            if(datetimeElement){ const updateDateTime = () => { const now = new Date(); const dateOptions = { weekday: 'long', month: 'long', day: 'numeric' }; datetimeElement.innerHTML = `${now.toLocaleDateString('en-US', dateOptions)}<br>${now.toLocaleTimeString('en-US')}`; }; setInterval(updateDateTime, 1000); updateDateTime(); }

            // --- Modal & Form Logic ---
            function showModal() { 
                issueForm.reset();
                modalOverlay.classList.add('visible'); 
                document.getElementById('issue-title').focus(); 
            }
            function hideModal() { modalOverlay.classList.remove('visible'); }
            
            function showNotification(message, type = 'success') {
                toastMessage.textContent = message;
                notificationToast.className = 'toast';
                notificationToast.classList.add(type);
                const iconName = type === 'success' ? 'check-circle' : 'alert-triangle';
                toastIcon.setAttribute('data-feather', iconName);
                feather.replace({ 'stroke-width': 1.5 });
                notificationToast.classList.add('visible');
                setTimeout(() => { notificationToast.classList.remove('visible'); }, 5000);
            }

            fab.addEventListener('click', showModal);
            if (mainCreateBtn) mainCreateBtn.addEventListener('click', showModal);
            cancelIssueBtn.addEventListener('click', hideModal);
            modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) hideModal(); });

            issueForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const submitText = submitBtn.querySelector('.submit-text');
                const spinner = submitBtn.querySelector('.spinner');
                
                submitBtn.disabled = true;
                submitText.style.display = 'none';
                spinner.style.display = 'block';

                const templateParams = {
                    title: document.getElementById('issue-title').value.trim(),
                    user_email: document.getElementById('user-email').value.trim(),
                    label: document.getElementById('issue-label').value,
                    comment: document.getElementById('issue-comment').value.trim() || 'No additional details provided by the user.',
                    submission_time: new Date().toLocaleString('en-IN', { dateStyle: 'full', timeStyle: 'long' })
                };

                if (!templateParams.title || !templateParams.user_email) {
                    showNotification("Title and Email are required.", "error");
                    submitBtn.disabled = false;
                    submitText.style.display = 'inline';
                    spinner.style.display = 'none';
                    return;
                }

                // --- SEND EMAIL USING EMAILJS ---
                emailjs.send('service_pb2tv2l', 'template_z3rwxsj', templateParams)
                    .then(function(response) {
                       showNotification("Issue report sent successfully!", "success");
                       hideModal();
                    }, function(error) {
                       const errorMessage = error.text || 'An unknown error occurred. Please check your EmailJS setup.';
                       showNotification(`Failed to send report: ${errorMessage}`, "error");
                       console.log('FAILED...', error);
                    })
                    .finally(() => {
                        submitBtn.disabled = false;
                        submitText.style.display = 'inline';
                        spinner.style.display = 'none';
                    });
            });
        });
    </script>
</body>
</html>
