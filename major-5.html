<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core V: Waves and Optics | BSc. Physics</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

    <style>
        /* --- THEME DEFINITIONS --- */
        :root {
            --bg-color: #f8f9fa; --card-bg: #ffffff; --primary-accent: #0d6efd; --text-primary: #212529; --text-secondary: #6c757d; --border-color: #dee2e6; --shadow-color: rgba(0, 0, 0, 0.05); --header-bg: rgba(255, 255, 255, 0.85); --back-btn-bg: #e9ecef; --back-btn-color: #495057;
            --primary-accent-hover: #0b5ed7;
            --resource-card-bg: #f1f3f5;
            --hero-gradient: linear-gradient(90deg, #007bff, #6610f2, #e83e8c, #fd7e14);
        }
        body.dark-mode {
            --bg-color: #121212; --card-bg: #1e1e1e; --primary-accent: #3b82f6; --text-primary: #e5e7eb; --text-secondary: #9ca3af; --border-color: #374151; --shadow-color: rgba(0, 0, 0, 0.2); --header-bg: rgba(30, 30, 30, 0.85); --back-btn-bg: #374151; --back-btn-color: #e5e7eb;
            --primary-accent-hover: #2563eb;
            --resource-card-bg: #2a2a2e;
            --hero-gradient: linear-gradient(90deg, #4dabf7, #9775fa, #f783ac, #ffa94d);
        }

        /* --- BASIC STYLES --- */
        body { font-family: 'Poppins', sans-serif; margin: 0; background-color: var(--bg-color); color: var(--text-primary); transition: background-color 0.3s ease, color 0.3s ease; }
        .container { width: 90%; max-width: 1200px; margin: 2rem auto; position: relative; z-index: 2; }
        header { background-color: var(--header-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); padding: 1rem 5%; border-bottom: 1px solid var(--border-color); position: sticky; top: 0; z-index: 1000; }
        .header-content { display: flex; justify-content: space-between; align-items: center; max-width: 1300px; margin: 0 auto;}
        .title-container { display: flex; align-items: center; gap: 0.8rem; } .title-container .logo { font-size: 2em; color: var(--primary-accent); }
        header h1 { margin: 0; font-size: 1.4em; color: var(--text-primary); }
        .header-controls { display: flex; align-items: center; gap: 1rem; }
        .theme-switcher { position: relative; } #theme-toggle { display: none; }
        .slider { cursor: pointer; width: 50px; height: 26px; background-color: #ccc; border-radius: 26px; display: block; position: relative; transition: background-color 0.3s ease; }
        .slider::before { content: ''; position: absolute; height: 20px; width: 20px; left: 3px; top: 3px; background-color: white; border-radius: 50%; transition: transform 0.3s ease; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="orange" viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 1 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707z"/></svg>'); background-size: 14px; background-repeat: no-repeat; background-position: center; }
        #theme-toggle:checked + .slider { background-color: var(--primary-accent); } #theme-toggle:checked + .slider::before { transform: translateX(24px); background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="lightblue" viewBox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/></svg>'); }
        footer { text-align: center; padding: 2rem 1rem; margin-top: auto; color: var(--text-secondary); border-top: 1px solid var(--border-color); }

        /* --- NEW: SCROLL PROGRESS BAR --- */
        #scroll-progress-bar { position: fixed; top: 0; left: 0; height: 4px; background: var(--hero-gradient); width: 0%; z-index: 2000; transition: width 0.1s linear; }
        
        /* --- NEW: ANIMATED PARTICLE BACKGROUND --- */
        #particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        
        /* --- ADVANCED COURSE PAGE STYLES --- */
        .back-button { display: inline-flex; align-items: center; gap: 0.5rem; text-decoration: none; background-color: var(--back-btn-bg); color: var(--back-btn-color); padding: 0.5rem 1rem; border-radius: 8px; font-weight: 400; transition: all 0.2s ease; margin-bottom: 2rem; align-self: flex-start; }
        .back-button:hover { background-color: var(--primary-accent); color: white; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }

        /* NEW: Animated Hero Header */
        .course-header { text-align: center; padding: 4rem 1rem; margin-bottom: 2rem; }
        .course-header h1 { font-size: 3.5em; font-weight: 700; margin: 0 0 0.5rem 0; background: var(--hero-gradient); color: transparent; -webkit-background-clip: text; background-clip: text; background-size: 200% auto; animation: gradient-text 10s linear infinite; }
        @keyframes gradient-text { to { background-position: 200% center; } }
        .course-header p { font-size: 1.2em; color: var(--text-secondary); margin: 0; max-width: 800px; margin-left: auto; margin-right: auto; }

        /* NEW: Quick Links Navigation */
        .quick-links { display: flex; flex-wrap: wrap; gap: 0.75rem; justify-content: center; background-color: var(--card-bg); border: 1px solid var(--border-color); padding: 1rem; border-radius: 12px; margin-bottom: 2rem; }
        .quick-link { text-decoration: none; background-color: var(--resource-card-bg); color: var(--text-secondary); padding: 0.5rem 1rem; border-radius: 8px; font-weight: 500; transition: all 0.2s ease; border: 1px solid var(--border-color); }
        .quick-link:hover { background-color: var(--primary-accent); color: white; border-color: var(--primary-accent); transform: translateY(-2px); }
        .quick-link .fa-fw { margin-right: 0.5rem; }

        .course-outcomes { background-color: var(--card-bg); border-radius: 12px; padding: 2rem; border: 1px solid var(--border-color); margin-bottom: 2rem; }
        .course-outcomes h2 { margin-top: 0; font-size: 1.5em; } .course-outcomes ul { list-style-type: none; padding-left: 0; }
        .course-outcomes li { padding-left: 2rem; position: relative; margin-bottom: 0.75rem; color: var(--text-secondary); }
        .course-outcomes li::before { content: '\f058'; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: var(--primary-accent); position: absolute; left: 0; top: 2px; font-size: 1.2em; }

        /* Accordion Styles */
        .accordion-item { background: var(--card-bg); border-radius: 12px; margin-bottom: 1rem; border: 1px solid var(--border-color); overflow: hidden; }
        .accordion-toggle { background: transparent; color: var(--text-primary); cursor: pointer; padding: 1.5rem; width: 100%; border: none; text-align: left; outline: none; font-size: 1.2em; font-weight: 600; display: flex; justify-content: space-between; align-items: center; transition: background-color 0.3s ease; }
        .accordion-toggle .unit-title { color: var(--primary-accent); margin-right: 1rem; }
        .accordion-toggle .fas { transition: transform 0.3s ease-in-out; } .accordion-toggle.active .fas { transform: rotate(180deg); }
        .accordion-panel { padding: 0 1.5rem; max-height: 0; overflow: hidden; transition: max-height 0.7s cubic-bezier(0.25, 1, 0.5, 1), padding 0.7s cubic-bezier(0.25, 1, 0.5, 1); }
        .accordion-panel.open { padding-bottom: 1.5rem; }

        /* NEW: Tabs within Accordion */
        .tab-container { display: flex; border-bottom: 2px solid var(--border-color); margin-bottom: 1.5rem; }
        .tab-link { font-size: 1em; font-weight: 500; color: var(--text-secondary); background: none; border: none; padding: 0.75rem 1.5rem; cursor: pointer; position: relative; transition: color 0.3s ease; }
        .tab-link::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 2px; background-color: var(--primary-accent); transform: scaleX(0); transition: transform 0.3s ease; }
        .tab-link.active { color: var(--primary-accent); } .tab-link.active::after { transform: scaleX(1); }
        .tab-pane { display: none; animation: fadeIn 0.5s ease; }
        .tab-pane.active { display: block; } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* Notes Gallery Styles */
        .notes-gallery-container { margin-top: 1rem; } .notes-gallery { display: flex; overflow-x: auto; gap: 1rem; padding-bottom: 1rem; scroll-snap-type: x mandatory; }
        .notes-gallery img { max-height: 400px; border-radius: 8px; box-shadow: 0 4px 15px var(--shadow-color); cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; scroll-snap-align: start; }
        .notes-gallery img:hover { transform: scale(1.03); box-shadow: 0 8px 25px var(--shadow-color); }
        .notes-gallery::-webkit-scrollbar { height: 8px; } .notes-gallery::-webkit-scrollbar-track { background: var(--resource-card-bg); border-radius: 4px; }
        .notes-gallery::-webkit-scrollbar-thumb { background-color: var(--primary-accent); border-radius: 4px; }

        /* Resources Grid */
        .resources-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; }
        .resource-card { background-color: var(--resource-card-bg); border: 1px solid var(--border-color); border-radius: 10px; padding: 1.5rem; text-decoration: none; display: flex; align-items: center; gap: 1rem; transition: all 0.2s ease; }
        .resource-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px var(--shadow-color); border-color: var(--primary-accent); }
        .resource-card .icon { font-size: 2em; color: var(--primary-accent); transition: transform 0.3s ease; }
        .resource-card:hover .icon { transform: scale(1.1) rotate(-5deg); }
        .resource-card .text h5 { margin: 0 0 0.25rem 0; font-size: 1em; color: var(--text-primary); }
        .resource-card .text p { margin: 0; font-size: 0.85em; color: var(--text-secondary); }

        /* Lightbox for Image Viewing */
        .lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 2000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px); animation: fadeIn 0.3s ease; }
        .lightbox img { max-width: 90%; max-height: 90%; object-fit: contain; box-shadow: 0 0 40px rgba(0,0,0,0.5); }
        .lightbox.visible { display: flex; }
    </style>
</head>
<body>
    
    <div id="scroll-progress-bar"></div>
    <canvas id="particle-canvas"></canvas>

    <header>
        <div class="header-content">
            <div class="title-container"><i class="fas fa-atom logo"></i><h1>BSc. Physics</h1></div>
            <div class="header-controls"><div class="theme-switcher"><input type="checkbox" id="theme-toggle"><label for="theme-toggle" class="slider"></label></div></div>
        </div>
    </header>

    <main class="container">
        <a href="sem3.html" class="back-button"><i class="fas fa-arrow-left"></i> Back to All Subjects</a>
        
        <div class="course-header">
            <h1>Waves and Optics</h1>
            <p>An in-depth exploration of wave phenomena and the principles governing light, from geometrical constructions to quantum coherence.</p>
        </div>

        <div class="quick-links">
            <a href="#unit1" class="quick-link"><i class="fa-fw fas fa-ruler-combined"></i> Unit I</a>
            <a href="#unit2" class="quick-link"><i class="fa-fw fas fa-wave-square"></i> Unit II</a>
            <a href="#unit3" class="quick-link"><i class="fa-fw fas fa-stream"></i> Unit III</a>
            <a href="#unit4" class="quick-link"><i class="fa-fw fas fa-border-all"></i> Unit IV</a>
        </div>

        <div class="course-outcomes">
            <h2><i class="fas fa-bullseye"></i> Course Outcomes</h2>
            <ul>
                <li>Basic understanding of propagation of light, its application and wave nature.</li>
                <li>To Understand the concepts of wave motion & interference.</li>
                <li>To Understand the concepts of diffraction and its application.</li>
                <li>To Apply the acquired knowledge of optics in Experiment.</li>
            </ul>
        </div>

        <div class="accordion-container">

            <!-- UNIT I -->
            <div class="accordion-item" id="unit1">
                <button class="accordion-toggle"><div><span class="unit-title">Unit I</span> Geometrical and Wave Optics</div><i class="fas fa-chevron-down"></i></button>
                <div class="accordion-panel">
                    <div class="tab-container">
                        <button class="tab-link active" data-tab="1-1">Syllabus</button>
                        <button class="tab-link" data-tab="1-2">Class Notes</button>
                        <button class="tab-link" data-tab="1-3">Resources</button>
                    </div>
                    <div id="tab-1-1" class="tab-pane active"><p>Fermat’s principle, Matrix formulation, Cardinal points/planes, Dispersion, Thick/Thin Lens, Eyepieces, EM nature of light, Huygens Principle, Temporal/Spatial Coherence.</p></div>
                    <div id="tab-1-2" class="tab-pane">
                        <div class="notes-gallery">
                            <img src="https://via.placeholder.com/600x800.png?text=Unit+1+Page+1" alt="Unit 1, Page 1">
                            <img src="https://via.placeholder.com/600x800.png?text=Unit+1+Page+2" alt="Unit 1, Page 2">
                        </div>
                    </div>
                    <div id="tab-1-3" class="tab-pane">
                        <div class="resources-grid">
                            <a href="#" class="resource-card"><span class="icon"><i class="fas fa-file-pdf"></i></span><div class="text"><h5>Unit 1 Full PDF</h5><p>Download all notes for offline reading.</p></div></a>
                            <a href="#" class="resource-card"><span class="icon"><i class="fab fa-youtube"></i></span><div class="text"><h5>Fermat's Principle</h5><p>Watch a video lecture on YouTube.</p></div></a>
                            <a href="#" class="resource-card"><span class="icon"><i class="fas fa-flask"></i></span><div class="text"><h5>Lens Simulation</h5><p>Interactive PhET simulation.</p></div></a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- UNIT II -->
            <div class="accordion-item" id="unit2">
                <button class="accordion-toggle"><div><span class="unit-title">Unit II</span> Wave Motion & Superposition</div><i class="fas fa-chevron-down"></i></button>
                <div class="accordion-panel">
                     <div class="tab-container">
                        <button class="tab-link active" data-tab="2-1">Syllabus</button>
                        <button class="tab-link" data-tab="2-2">Class Notes</button>
                        <button class="tab-link" data-tab="2-3">Resources</button>
                    </div>
                    <div id="tab-2-1" class="tab-pane active"><p>Plane/Spherical Waves, Wave Equation, Particle/Wave Velocities, Energy Transport, Intensity, Superposition of perpendicular Harmonic Oscillations, Lissajous Figures.</p></div>
                    <div id="tab-2-2" class="tab-pane">
                        <div class="notes-gallery">
                            <img src="https://via.placeholder.com/600x800.png?text=Unit+2+Page+1" alt="Unit 2, Page 1">
                        </div>
                    </div>
                    <div id="tab-2-3" class="tab-pane">
                         <div class="resources-grid">
                            <a href="#" class="resource-card"><span class="icon"><i class="fas fa-file-pdf"></i></span><div class="text"><h5>Unit 2 Full PDF</h5><p>Download all notes for offline reading.</p></div></a>
                            <a href="#" class="resource-card"><span class="icon"><i class="fab fa-youtube"></i></span><div class="text"><h5>Lissajous Figures</h5><p>Watch a video lecture on YouTube.</p></div></a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- UNIT III -->
            <div class="accordion-item" id="unit3">
                <button class="accordion-toggle"><div><span class="unit-title">Unit III</span> Interference</div><i class="fas fa-chevron-down"></i></button>
                <div class="accordion-panel">
                     <div class="tab-container">
                        <button class="tab-link active" data-tab="3-1">Syllabus</button>
                        <button class="tab-link" data-tab="3-2">Class Notes</button>
                        <button class="tab-link" data-tab="3-3">Resources</button>
                    </div>
                    <div id="tab-3-1" class="tab-pane active"><p>Young’s double slit, Lloyds Mirror, Fresnel's Bi-prism, Interference in Thin Films, Newton’s Rings, Michelson’s Interferometer, Fabry-Perot interferometer.</p></div>
                    <div id="tab-3-2" class="tab-pane">
                        <div class="notes-gallery">
                            <img src="https://via.placeholder.com/600x800.png?text=Unit+3+Page+1" alt="Unit 3, Page 1">
                        </div>
                    </div>
                    <div id="tab-3-3" class="tab-pane">
                         <div class="resources-grid">
                           <a href="#" class="resource-card"><span class="icon"><i class="fas fa-file-pdf"></i></span><div class="text"><h5>Unit 3 Problem Set</h5><p>Practice questions on interference.</p></div></a>
                           <a href="#" class="resource-card"><span class="icon"><i class="fas fa-flask"></i></span><div class="text"><h5>Newton's Rings Sim</h5><p>Interactive simulation.</p></div></a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- UNIT IV -->
            <div class="accordion-item" id="unit4">
                <button class="accordion-toggle"><div><span class="unit-title">Unit IV</span> Diffraction</div><i class="fas fa-chevron-down"></i></button>
                <div class="accordion-panel">
                     <div class="tab-container">
                        <button class="tab-link active" data-tab="4-1">Syllabus</button>
                        <button class="tab-link" data-tab="4-2">Class Notes</button>
                        <button class="tab-link" data-tab="4-3">Resources</button>
                    </div>
                    <div id="tab-4-1" class="tab-pane active"><p>Fraunhoffer diffraction (single/double/multiple slit, circular aperture), Resolving Power, Diffraction grating, Fresnel Diffraction, Half-Period Zones, Zone Plate, Fresnel’s Integral.</p></div>
                    <div id="tab-4-2" class="tab-pane">
                        <div class="notes-gallery">
                             <img src="https://via.placeholder.com/600x800.png?text=Unit+4+Page+1" alt="Unit 4, Page 1">
                        </div>
                    </div>
                    <div id="tab-4-3" class="tab-pane">
                        <div class="resources-grid">
                            <a href="#" class="resource-card"><span class="icon"><i class="fas fa-file-pdf"></i></span><div class="text"><h5>Unit 4 Full PDF</h5><p>Download all notes for offline reading.</p></div></a>
                            <a href="#" class="resource-card"><span class="icon"><i class="fab fa-youtube"></i></span><div class="text"><h5>Resolving Power</h5><p>Watch a video lecture on YouTube.</p></div></a>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <div id="lightbox" class="lightbox"><img src="" alt="Full-screen note image"></div>

    <footer><p>&copy; <span id="current-year"></span> Created & Designed by Pratyush Swain.</p></footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Theme Switcher Logic ---
        const themeToggle = document.getElementById('theme-toggle');
        const applyTheme = (theme) => {
            document.body.classList.toggle('dark-mode', theme === 'dark');
            if (themeToggle) { themeToggle.checked = (theme === 'dark'); }
        };
        const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        applyTheme(savedTheme);
        if (themeToggle) {
            themeToggle.addEventListener('change', () => {
                const newTheme = themeToggle.checked ? 'dark' : 'light';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });
        }
        if (document.getElementById('current-year')) { document.getElementById('current-year').textContent = new Date().getFullYear(); }

        // --- Scroll Progress Bar Logic ---
        const progressBar = document.getElementById('scroll-progress-bar');
        window.addEventListener('scroll', () => {
            const scrollableHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrolled = (window.scrollY / scrollableHeight) * 100;
            if (progressBar) { progressBar.style.width = scrolled + '%'; }
        });

        // --- Accordion Logic ---
        const accordionToggles = document.querySelectorAll('.accordion-toggle');
        accordionToggles.forEach(toggle => {
            toggle.addEventListener('click', () => {
                const panel = toggle.nextElementSibling;
                const isOpen = panel.style.maxHeight;
                
                // Close all other accordions
                document.querySelectorAll('.accordion-panel').forEach(p => p.style.maxHeight = null);
                document.querySelectorAll('.accordion-toggle').forEach(t => t.classList.remove('active'));

                // Open the clicked one if it was closed
                if (!isOpen) {
                    toggle.classList.add('active');
                    panel.style.maxHeight = panel.scrollHeight + "px";
                    panel.classList.add('open');
                } else {
                     panel.classList.remove('open');
                }
            });
        });

        // --- Tab Logic ---
        const allTabContainers = document.querySelectorAll('.accordion-panel');
        allTabContainers.forEach(container => {
            const tabLinks = container.querySelectorAll('.tab-link');
            const tabPanes = container.querySelectorAll('.tab-pane');
            tabLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const tabId = link.getAttribute('data-tab');
                    
                    tabLinks.forEach(l => l.classList.remove('active'));
                    tabPanes.forEach(p => p.classList.remove('active'));
                    
                    link.classList.add('active');
                    container.querySelector('#tab-' + tabId).classList.add('active');

                    // Recalculate accordion height
                    const openAccordionPanel = document.querySelector('.accordion-panel.open');
                    if (openAccordionPanel) {
                        openAccordionPanel.style.maxHeight = openAccordionPanel.scrollHeight + 'px';
                    }
                });
            });
        });

        // --- Quick Links Smooth Scroll ---
        document.querySelectorAll('.quick-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    // Open the accordion if it's not already
                    const toggle = targetElement.querySelector('.accordion-toggle');
                    const panel = targetElement.querySelector('.accordion-panel');
                    if (!panel.style.maxHeight) {
                        toggle.click();
                    }
                    // Scroll to the element
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // --- Lightbox Logic ---
        const lightbox = document.getElementById('lightbox');
        if (lightbox) {
            const lightboxImage = lightbox.querySelector('img');
            const galleryImages = document.querySelectorAll('.notes-gallery img');

            galleryImages.forEach(image => {
                image.addEventListener('click', () => {
                    lightboxImage.src = image.src;
                    lightbox.classList.add('visible');
                });
            });
            lightbox.addEventListener('click', () => lightbox.classList.remove('visible'));
        }

        // --- Animated Particle Background Logic ---
        const canvas = document.getElementById('particle-canvas');
        if (canvas) {
            const ctx = canvas.getContext('2d');
            let particles = [];
            
            const setCanvasSize = () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            };

            const createParticles = () => {
                particles = [];
                const particleCount = (canvas.width * canvas.height) / 10000;
                for (let i = 0; i < particleCount; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        vx: Math.random() * 0.5 - 0.25,
                        vy: Math.random() * 0.5 - 0.25,
                        radius: Math.random() * 1.5 + 0.5,
                    });
                }
            };

            const animate = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                const particleColor = getComputedStyle(document.body).getPropertyValue('--text-secondary') + '66'; // with opacity
                ctx.fillStyle = particleColor;
                ctx.strokeStyle = particleColor;

                for (let i = 0; i < particles.length; i++) {
                    let p = particles[i];
                    p.x += p.vx;
                    p.y += p.vy;

                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                    ctx.fill();
                }
                requestAnimationFrame(animate);
            };
            
            setCanvasSize();
            createParticles();
            animate();
            
            window.addEventListener('resize', () => {
                setCanvasSize();
                createParticles();
            });
        }
    });
    </script>
</body>
</html>
